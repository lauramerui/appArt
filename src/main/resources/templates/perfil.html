<!DOCTYPE html>
<html lang="es" class="h-100" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/jpg" href="/img/favicon.png"/>

	<!--BootStrap-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
	<!--jquery-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- 	validate -->
	<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.min.js"></script>
	<!-- estilos -->
	<link rel="stylesheet" href="css/comun.css">
	<link rel="stylesheet" href="css/perfil.css">
	<link rel="stylesheet" href="../static/css/comun.css">
	<link rel="stylesheet" href="../static/css/perfil.css">
	<!--js-->
	<script src="js/general.js"></script>
	<script src="js/validaForms.js"></script>
	<title>Mi perfil | Arty</title>
</head>

<body class="d-flex flex-column h-100">
	<header th:insert="/plantilla::header"></header>
	<!-- MAIN -->
	<main class="flex-shrink-0">
		<div class="container">
			<!-- breadcrumb -->
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="/">Inicio</a></li>
				<li class="breadcrumb-item" active aria-current="page">Mi
					perfil</a>
				</li>
			</ol>
			<h1 class="mt-2 text-center">Mi perfil</h1>
			<div class="row m-0 mb-3">
				<div class="col-12 col-lg-auto d-flex justify-content-center justify-content-lg-start">
					<figure class="figure m-0 rounded-circle">
						<img th:src="@{${'img/usuarios/' + session.usuLogueado.foto}}"
							src="../static/img/usuarios/jirafa.jpg" alt="foto de usuario"
							class="figure-img img-fluid p-0 m-0 shadow-sm rounded-circle">
					</figure>
				</div>
				<div class="col-12 col-lg d-flex flex-column align-items-center align-items-lg-start justify-content-lg-center">
					<p class="h2" th:text="${session.usuLogueado.nombre + ' ' + session.usuLogueado.apellidos}">Nombre y
						pellidos</p>
					<p class="m-0" th:text="${session.usuLogueado.email}">Email</p>
				</div>
			</div>
			<!--cambiar imagen-->
			<div class="row forms-perfil">
				<div class="col-12 ">
					<form action="/perfil/cambiar-img" method="post" enctype="multipart/form-data"
						class="p-3 border rounded-2">
						<h2 class="fs-3">Cambiar imagen</h2>
						<label th:for="'img'+${session.usuLogueado.foto}" class="">
							Seleccione imagen
						</label>
						<div class="input-group">
							<input class="form-control bg-gradient" type="file" name="fileEdit"
								th:id="'img'+${session.usuLogueado.foto}">
							<input class="btn btn-azul align-self-center" type="submit" name="cambiarImg"
								value="Aceptar">
						</div>
					</form>
				</div>

				<!--cambiar contraseña-->
				<div class="col-12 my-4">
					<form action="/perfil/cambiar-pass" method="post" class="d-md-flex flex-md-column border rounded-2 p-3" id="formCambiaPsw">
						<h2 class="fs-3">Cambiar contraseña</h2>
						<label for="passw" class="form-label">Contraseña actual:</label>
						<input type="password"
							class="form-control" placeholder="Introduzca su contraseña actual" name="passwActual"
							id="passwActual"> 
						<label for="nuevaPassw" class="form-label mt-3">Nueva contraseña:</label>
						<input type="password" class="form-control" id="nuevaPassw" name="nuevaPassw"
							placeholder="Introduzca la nueva contraseña">
						<div id="ayudaPassw" class="form-text">Requisitos: Entre 8 y
							20 carácteres, una mayúscula, una minúscula, un dígito y un
							carácter especial (@#$%&)</div>

						<label for="nuevaPassw2" class="form-label mt-3">Repita la
							nueva contraseña:</label>
						<input type="password" class="form-control" id="nuevaPassw2" name="nuevaPassw2"
							placeholder="Introduzca de nuevo la nueva contraseña"> <input type="submit"
							class="btn-azul col-12 col-md-8 col-lg-6 align-self-md-center mt-3" value="Cambiar contraseña">
					</form>
				</div>

				<!--cancelar cuenta-->
				<div class="col-12 mb-5">
					<form action="/perfil/delete" class="d-md-flex flex-md-column p-3 border rounded-2" id="formBorrarUsu">
						<h2 class="fs-3">Cancelar cuenta</h2>
						<div class="form-text">Si cancelas tu cuenta de Arty,
							borrarás de forma irreversible todos tus favoritos y progresos,
							así como datos relacionados de nuestros servidores y tu cuenta
							dejará de funcionar.</div>
						<label for="confPass" class="form-label mt-3">Introduzca
							contraseña:</label> <input type="password" class="form-control" id="confPass"
							name="passwActual" placeholder="Introduzca contraseña" required> <input type="submit"
							class="boton col-12 col-md-8 col-lg-6 align-self-md-center mt-3" value="Cancelar cuenta">
					</form>
				</div>
			</div>
		</div>
	</main>
	<footer class="footer d-sm-flex justify-content-center mt-auto py-3" th:insert="/plantilla::footer"></footer>
</body>

</html>